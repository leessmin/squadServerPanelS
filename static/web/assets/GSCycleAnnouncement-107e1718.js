import{u as G,a as $}from"./alert-95b55714.js";import{d as D,k as f,G as H,o as m,e as g,f as s,F as I,B as J,g as l,h as r,c as i,i as _,t as V,s as L,v as T,x as z,H as F}from"./index-2df293b2.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import"./http-9bd06147.js";import"./config-9c65774d.js";const C=d=>(L("data-v-bd1f5492"),d=d(),T(),d),R={class:"main"},U=C(()=>s("div",{class:"title-box"},[s("h3",null,"循环公告")],-1)),j={class:"GSCycleAnnouncement"},K=C(()=>s("div",{class:"title"},[s("p",null,"在游戏中每隔 x 秒按顺序循环发送一条消息（基于服务器配置）")],-1)),P={class:"content"},Q={class:"content-box"},W={style:{display:"inline-block"}},X={class:"input-box"},Y={class:"btn-box"},Z=D({__name:"GSCycleAnnouncement",setup(d){const c=f(""),n=f([]),p=f(),S=async()=>{var o,e;c.value.trim().length<=0?z.warning("您未输入任何内容"):(n.value.push(c.value),await F(),(e=p.value)==null||e.scrollTo(0,(o=p.value)==null?void 0:o.scrollHeight)),c.value=""},y=(o,e)=>{let t=n.value.indexOf(o);e===0?(n.value.splice(t,1),t=t-1<0?0:t-1,n.value.splice(t,0,o)):e===1&&(n.value.splice(t,1),t=t>=n.value.length?n.value.length:t+1,n.value.splice(t,0,o))},k=o=>{n.value=n.value.filter(e=>e!==o)},b=()=>{u.saveSquadMsg(n.value)},x=()=>{u.getSquadMsg()},u=G();u.getSquadMsg(),u.$subscribe((o,e)=>{n.value=JSON.parse(JSON.stringify(e.serverMsg))}),H(async(o,e,t)=>{if(!w()){t();return}if(!await $()){t(e);return}t()});function w(){return JSON.stringify(u.serverMsg)!=JSON.stringify(n.value)}return(o,e)=>{const t=i("up-outlined"),M=i("down-outlined"),O=i("close-outlined"),N=i("a-tag"),q=i("a-input"),v=i("a-button"),A=i("a-input-group");return m(),g("div",R,[U,s("div",j,[K,s("div",P,[s("div",Q,[s("ul",{ref_key:"ulDOM",ref:p},[(m(!0),g(I,null,J(n.value,(a,B)=>(m(),g("li",{key:B},[l(N,null,{default:r(()=>[_(V(a)+" ",1),s("div",W,[l(t,{style:{cursor:"pointer"},onClick:h=>y(a,0)},null,8,["onClick"]),l(M,{style:{cursor:"pointer"},onClick:h=>y(a,1)},null,8,["onClick"]),l(O,{style:{cursor:"pointer"},onClick:h=>k(a)},null,8,["onClick"])])]),_:2},1024)]))),128))],512)])]),s("div",X,[l(A,{compact:"",style:{width:"80%"},size:"large"},{default:r(()=>[l(q,{placeholder:"请输入循环公告的消息",value:c.value,"onUpdate:value":e[0]||(e[0]=a=>c.value=a),style:{width:"calc(100% - 100px)"}},null,8,["value"]),l(v,{size:"large",type:"primary",onClick:e[1]||(e[1]=a=>S())},{default:r(()=>[_("添加消息")]),_:1})]),_:1})]),s("div",Y,[l(v,{type:"primary",onClick:b},{default:r(()=>[_("保存")]),_:1}),l(v,{type:"primary",danger:"",onClick:x},{default:r(()=>[_("取消")]),_:1})])])])}}});const le=E(Z,[["__scopeId","data-v-bd1f5492"]]);export{le as default};
